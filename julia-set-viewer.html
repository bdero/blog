<!DOCTYPE html>
<html lang="en">

<head>
      <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


  <title>Julia set viewer</title>


  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="origin" />
  <meta name="generator" content="Pelican" />
  <link href="./" rel="canonical" />

  <!-- Feed -->
        <link href="https://blog.bdero.me/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="bran's blog Full Atom Feed" />
          <link href="https://blog.bdero.me/feeds/algorithms.atom.xml" type="application/atom+xml" rel="alternate" title="bran's blog Categories Atom Feed" />

  <link href="./theme/css/style.css" type="text/css" rel="stylesheet" />

  <!-- Code highlight color scheme -->
      <link href="./theme/css/code_blocks/github.css" rel="stylesheet">


  <!-- Custom fonts -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,300' rel='stylesheet' type='text/css' />
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css" />
  <script src="https://use.fontawesome.com/ec379960cb.js"></script>

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->


    <link href="./julia-set-viewer.html" rel="canonical" />

        <meta name="description" content="A little bit of fun with fractals!">

        <meta name="author" content="bdero">

        <meta name="tags" content="2d">
        <meta name="tags" content="algorithm">
        <meta name="tags" content="browser">
        <meta name="tags" content="canvas">
        <meta name="tags" content="classic">
        <meta name="tags" content="fractal">
        <meta name="tags" content="html5">
        <meta name="tags" content="interactive">
        <meta name="tags" content="iteration">
        <meta name="tags" content="ivank.js">
        <meta name="tags" content="javascript">
        <meta name="tags" content="julia set">
        <meta name="tags" content="mobile">
        <meta name="tags" content="vector graphics">
        <meta name="tags" content="visualization">
        <meta name="tags" content="webgl">




<!-- Open Graph -->
<meta property="og:site_name" content="bran's blog"/>
<meta property="og:title" content="Julia set viewer"/>
<meta property="og:description" content="A little bit of fun with fractals!"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="./julia-set-viewer.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2013-09-28 23:16:00-04:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="./author/bdero.html">
<meta property="article:section" content="Algorithms"/>
<meta property="article:tag" content="2d"/>
<meta property="article:tag" content="algorithm"/>
<meta property="article:tag" content="browser"/>
<meta property="article:tag" content="canvas"/>
<meta property="article:tag" content="classic"/>
<meta property="article:tag" content="fractal"/>
<meta property="article:tag" content="html5"/>
<meta property="article:tag" content="interactive"/>
<meta property="article:tag" content="iteration"/>
<meta property="article:tag" content="ivank.js"/>
<meta property="article:tag" content="javascript"/>
<meta property="article:tag" content="julia set"/>
<meta property="article:tag" content="mobile"/>
<meta property="article:tag" content="vector graphics"/>
<meta property="article:tag" content="visualization"/>
<meta property="article:tag" content="webgl"/>
<meta property="og:image" content="./images/banner1500x500.jpeg">

<!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@cheesekeg">
    <meta name="twitter:title" content="Julia set viewer">
    <meta name="twitter:url" content="./julia-set-viewer.html">

        <meta name="twitter:image:src" content="./images/banner1500x500.jpeg">

      <meta name="twitter:description" content="A little bit of fun with fractals!">

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Julia set viewer",
  "headline": "Julia set viewer",
  "datePublished": "2013-09-28 23:16:00-04:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "bdero",
    "url": "./author/bdero.html"
  },
  "image": "./images/banner1500x500.jpeg",
  "url": "./julia-set-viewer.html",
  "description": "A little bit of fun with fractals!"
}
</script>
</head>
<!-- TODO : Body class -->
<body class="home-template">

<nav id="menu">
  <a class="close-button">Close</a>
  <div class="nav-wrapper">
    <p class="nav-label">Menu</p>
    <ul>


    </ul>
  </div>
</nav>
    <!-- Progressbar -->
    <div class="progress-container">
        <span class="progress-bar"></span>
    </div>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header id="post-header" class="has-cover">
      <div class="inner">
        <nav id="navigation">
            <span id="home-button" class="nav-button">
                <a class="home-button" href="./" title="Home"><i class="ic ic-arrow-left"></i> Home</a>
            </span>
          <span id="menu-button" class="nav-button">
            <a class="menu-button"><i class="ic ic-menu"></i> Menu</a>
          </span>
        </nav>
        <h1 class="post-title">Julia set viewer</h1>
        <!-- TODO : Proper class for headline -->
        <span class="post-meta">
                <a href="./author/bdero.html">Bdero</a>
            | <time datetime="Sat 28 September 2013">Sat 28 September 2013</time>
        </span>
        <!-- TODO : Modified check -->
            <div class="post-cover cover" style="background-image: url('./images/banner1500x500.jpeg')">
      </div>
    </header>

  <section id="wrapper">
    <a class="hidden-close"></a>

    <!-- Post content -->
    <main class="content" role="main">
        <article class="post">
        <div class="inner">
            <section class="post-content">
                <p>A little bit of fun with fractals! <!--more--></p>
<iframe src="http://bdero.me/ivank-tests/julia/" width="100%" height="465" frameborder="no"></iframe>

<h5><strong>If you don't see anything in the frame above, then either <a title="Check if your browser supports WebGL" href="http://get.webgl.org/" target="_blank">your browser doesn't support WebGL</a>, or your graphics driver is not sufficient for initializing a WebGL context.</strong></h5>

<p>The source code is available on <a title="Julia Set viewer source code" href="https://github.com/bdero/ivank-tests/blob/gh-pages/julia/julia.js" target="_blank">GitHub</a>.</p>
<p>There's nothing special about the way each pixel's color is determined. It's colored based on the number of iterations it takes a point to escape the given distance bound (in this case, <em>sqrt(10)</em>) in the Julia set function, just like <a title="How Julia set images are generated" href="http://www.youtube.com/watch?v=2AZYZ-L8m9Q#t=358" target="_blank">any other typical fractal viewer</a>.</p>
<p>I decided to have it precompute the color pallet like this:</p>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">generateColors</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">colors</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Uint32Array</span><span class="p">(</span><span class="nx">MAX_ITERATIONS</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">escapeTime</span><span class="p">,</span> <span class="nx">red</span><span class="p">,</span> <span class="nx">green</span><span class="p">,</span> <span class="nx">blue</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">colors</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">escapeTime</span> <span class="o">=</span> <span class="nx">i</span><span class="o">/</span><span class="nx">MAX_ITERATIONS</span><span class="p">;</span>

        <span class="nx">red</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">escapeTime</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="mh">0xff</span><span class="p">;</span>
        <span class="nx">green</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">escapeTime</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">)</span><span class="o">*</span><span class="mh">0xff</span><span class="p">;</span>
        <span class="nx">blue</span> <span class="o">=</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">escapeTime</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="mh">0xff</span><span class="p">;</span>

        <span class="nx">colors</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mh">0xff000000</span> <span class="o">|</span> <span class="nx">red</span> <span class="o">|</span> <span class="nx">green</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span> <span class="o">|</span> <span class="nx">blue</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>...and here's what the color functions look like on a graph, where blue starts off strong and dies off, green peaks in the middle, and red ends up strong:</p>
<iframe src="http://graph.tk/" id="julia-set-viewer_colorgraph" width="100%" height="200" frameborder="no"> </iframe>

<script>
var graph=document.getElementById("julia-set-viewer_colorgraph");
graph.onload=function() { function g(m){ graph.contentWindow.postMessage(m,"http://graph.tk") };
g("add:(cos(x*pi)+1)/2"); // Blue
g("add:(-cos(x*pi)+1)/2"); // Red
g("add:sin(x*pi)"); // Green
g("scale:9,3");
g("center:0.5,0.5");
}</script>

<p>The viewer is made up of a few small components:
<ul>
    <li>A <strong>viewport</strong>, which finds the rectangle on the complex plane to render based on given <em>translation coordinates</em>, a <em>zoom multiplier</em>, and the current <em>window resolution</em>.</li>
    <li>A <strong>bitmap</strong>, which holds the most up-to-date <em>image buffer</em> to display via WebGL. Sections of it are continuously overwritten by the <strong>renderer</strong>.</li>
    <li>A <strong>renderer</strong>, which calls the Julia set function continuously, limiting each execution time a maximum of <em>20ms</em> and keeping track of where it left off in the <strong>bitmap</strong> between each call. It also keeps track of the <em>offset</em> (a complex number to add to a point each time it's squared in the Julia set function).</li>
    <li>A <strong>controller</strong>, which sets up the head-up display <em>buttons</em>, <em>text</em>, and user input <em>listeners</em> to modify the <em>zoom</em> and <em>center</em> of the <strong>viewport</strong> and randomly select new <em>offsets</em> for the Julia set function.</li>
</ul></p>
<p>Everytime you hit <strong>+</strong> to zoom in, the <em>zoom</em> of the <strong>viewport</strong> is multiplied by <em>1.5</em>. The <strong>viewport</strong> generates a rectangle every frame by essentially dividing a given starting rectangle's width and height by the <em>zoom</em>.</p>
<p>Because of this setup, if you zoom in far enough, you'll crash into a pixelated mess:
<img class="aligncenter" alt="julia_zoom" src="./images/julia_zoom.gif" /></p>
<p>This is due to the floating point numbers having limited precision - in the case of JavaScript, floating point numbers are 64-bit. You may also notice that the <strong>viewport</strong>'s <em>center</em> snaps while panning when you're zoomed in that far.</p>
<p>The graphics are provided by WebGL via the wonderful <a href="http://lib.ivank.net/" title="IvanK Lib" target="_blank">IvanK.js</a>. The Julia set itself is, however, ironically software rendered - mainly because IvanK.js isn't intended for use alongside low level access to WebGL.. and I wanted to see how fast I could get it to work in pure JavaScript. c:</p>
<p>No fragment shaders were <del>butchered</del> written in the making of this demo.</p>
            </section>

            <section class="post-info">
                <div class="post-share">
                    <a class="twitter" href="https://twitter.com/share?text=Julia set viewer&amp;url=./julia-set-viewer.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <i class="ic ic-twitter"></i><span class="hidden">Twitter</span>
                    </a>
                    <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=./julia-set-viewer.html" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <i class="ic ic-facebook"></i><span class="hidden">Facebook</span>
                    </a>
                    <a class="googleplus" href="https://plus.google.com/share?url=./julia-set-viewer.html" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <i class="ic ic-googleplus"></i><span class="hidden">Google+</span>
                    </a>
                    <div class="clear"></div>
                </div>

                <aside class="post-tags">
<a href="./tag/2d.html">2d</a><a href="./tag/algorithm.html">algorithm</a><a href="./tag/browser.html">browser</a><a href="./tag/canvas.html">canvas</a><a href="./tag/classic.html">classic</a><a href="./tag/fractal.html">fractal</a><a href="./tag/html5.html">html5</a><a href="./tag/interactive.html">interactive</a><a href="./tag/iteration.html">iteration</a><a href="./tag/ivankjs.html">ivank.js</a><a href="./tag/javascript.html">javascript</a><a href="./tag/julia-set.html">julia set</a><a href="./tag/mobile.html">mobile</a><a href="./tag/vector-graphics.html">vector graphics</a><a href="./tag/visualization.html">visualization</a><a href="./tag/webgl.html">webgl</a>                </aside>

                <div class="clear"></div>

                <aside class="post-author">


                        <figure class="post-author-avatar">
                            <img src="./images/avatar.jpg" alt="Brandon DeRosier" />
                        </figure>
                    <div class="post-author-bio">
                        <h4 class="post-author-name"><a href="./author/bdero.html">Brandon DeRosier</a></h4>
                            <p class="post-author-about">I'm a Full Stack Engineer with a lot of interests. Please see my GitHub profile if you're interested in my work. :)</p>
                            <span class="post-author-location"><i class="fa fa-location"></i> Boston, MA</span>
                            <span class="post-author-github"><a target="_blank" href="https://github.com/bdero"><i class="fa fa-github"></i> GitHub</a></span>
                            <span class="post-author-keybase"><a target="_blank" href="https://keybase.io/bdero"><i class="fa fa-key"></i> Keybase</a></span>
                            <span class="post-author-linkedin"><a target="_blank" href="https://www.linkedin.com/in/bderosier"><i class="fa fa-linkedin"></i> LinkedIn</a></span>
                            <span class="post-author-twitter"><a target="_blank" href="https://twitter.com/cheesekeg"><i class="fa fa-twitter"></i> Twitter</a></span>
                    </div>
                    <div class="clear"></div>
                </aside>

                </section>


                <aside class="post-nav">
                    <div class="clear"></div>
                </aside>

            </div>
        </article>
    </main>
      <!-- TODO : Body class -->
    <div id="body-class" style="display: none;" class=""></div>

    <footer id="footer">
      <div class="inner">
        <section class="credits">


          <span class="credits-theme">Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a></span>
          <span class="credits-software">Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a></span>
        </section>
      </div>
    </footer>
  </section>

  <script type="text/javascript" src="./theme/js/script.js"></script>

</body>
</html>